<html lang="en">
<head>
    <title>DataFrame Summary</title>
    <meta charset="UTF-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
        crossorigin="anonymous"
    />
    <style>
        /* Apply the following style for horizontal scrolling */
        .table-scrollable {
            overflow-x: auto;
        }
        /* Center-align the content of the table */
        table {
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }
        th, td {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>Uploaded DataFrame Preview (First 10 Rows)</h1>
        <div class="container table-scrollable mt-3">
            {% if preview_html %}
                {{ preview_html|safe }}
            {% else %}
                <p>No DataFrame uploaded yet.</p>
            {% endif %}
        </div>
        <div class="container mt-3">
            <h3>Basic Summary</h3>
            <p>Number of Rows: {{num_rows}}</p>
            <p>Number of Columns: {{num_cols}}</p>
            <p>Numerical Features: {{ num_numerical_cols }}. Feature Names: {{numerical_cols}}</p>
            <p>Categorical Features: {{ num_cat_cols }}. Feature Names: {{cat_cols}}</p>
            <p>Datetime Features: {{ num_datetime_cols }}. Feature Names: {{datetime_cols}}</p>
        </div>
        <div class="container mt-5">
            <form method="post" action="{% url 'save_to_database' %}">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="dbName" class="form-label">Database Name:</label>
                    <input type="text" class="form-control" id="dbName" name="dbName" required>
                </div>
                <div class="mb-3">
                    <label for="tableName" class="form-label">Table Name:</label>
                    <input type="text" class="form-control" id="tableName" name="tableName" required>
                </div>
                <button type="submit" class="btn btn-primary">Save to Database</button>
            </form>
            
            {% if save_success %}
            <div class="alert alert-success" role="alert">
                Data saved to database successfully.
            </div>
            {% endif %}
            {% if save_error %}
                <div class="alert alert-danger mt-3" role="alert">
                    Error saving data to database!
                </div>
            {% endif %}
        </div>
    </div>
    <div class='container'>
        <a href="/" class="btn btn-secondary mt-3">Upload Another File</a>
    </div>
</body>
</html>